\hypertarget{group___c_o___s_d_o__object_dictionary}{}\doxysection{Object dictionary}
\label{group___c_o___s_d_o__object_dictionary}\index{Object dictionary@{Object dictionary}}


C\+A\+Nopen Object dictionary implementation in C\+A\+Nopen\+Node.  


C\+A\+Nopen Object dictionary implementation in C\+A\+Nopen\+Node. 

C\+A\+Nopen Object dictionary is a collection of different data items, which can be used by the stack or by the application.

Each Object dictionary entry is located under 16-\/bit index, as specified by the C\+A\+Nopen\+:
\begin{DoxyItemize}
\item 0x0001..0x025F\+: Data type definitions.
\item 0x1000..0x1\+F\+FF\+: Communication profile area.
\item 0x2000..0x5\+F\+FF\+: Manufacturer-\/specific profile area.
\item 0x6000..0x9\+F\+FF\+: Standardized device profile area for eight logical devices.
\item 0x\+A000..0x\+A\+F\+FF\+: Standardized network variable area.
\item 0x\+B000..0x\+B\+F\+FF\+: Standardized system variable area.
\item Other\+: Reserved.
\end{DoxyItemize}

If Object dictionary entry has complex data type (array or structure), then 8-\/bit sub\+Index specifies the sub-\/member of the entry. In that case sub\+Index 0x00 is encoded as uint8\+\_\+t and specifies the highest available sub\+Index with that entry. Subindex 0x\+FF has special meaning in the standard and is not supported by C\+A\+Nopen\+Node.\hypertarget{group___c_o___s_d_o__object_dictionary_autotoc_md22}{}\doxysubparagraph{Object type of one Object dictionary entry}\label{group___c_o___s_d_o__object_dictionary_autotoc_md22}

\begin{DoxyItemize}
\item N\+U\+LL\+: Not used by C\+A\+Nopen\+Node.
\item D\+O\+M\+A\+IN\+: Block of data of variable length. Data and length are under control of the application.
\item D\+E\+F\+T\+Y\+PE\+: Definition of C\+A\+Nopen basic data type, for example I\+N\+T\+E\+G\+E\+R16.
\item D\+E\+F\+S\+T\+R\+U\+CT\+: Definition of complex data type -\/ structure, which is used with R\+E\+C\+O\+RD.
\item V\+AR\+: Variable of C\+A\+Nopen basic data type. Subindex is 0.
\item A\+R\+R\+AY\+: Array of multiple variables of the same C\+A\+Nopen basic data type. Subindex 1..array\+Length specifies sub-\/member.
\item R\+E\+C\+O\+RD\+: Record or structure of multiple variables of different C\+A\+Nopen basic data type. Subindex specifies sub-\/member.
\end{DoxyItemize}\hypertarget{group___c_o___s_d_o__object_dictionary_autotoc_md23}{}\doxysubparagraph{Implementation in C\+A\+Nopen\+Node}\label{group___c_o___s_d_o__object_dictionary_autotoc_md23}
Object dictionary in C\+A\+Nopen\+Node is implemented in C\+O\+\_\+\+O\+D.\+h and C\+O\+\_\+\+O\+D.\+c files. These files are application specific and must be generated by Object dictionary editor (application is included by the stack).

C\+O\+\_\+\+O\+D.\+h and C\+O\+\_\+\+O\+D.\+c files include\+:
\begin{DoxyItemize}
\item Structure definitions for records.
\item Global declaration and initialization of all variables, arrays and records mapped to Object dictionary. Variables are distributed in multiple objects, depending on memory location. This eases storage to different memories in microcontroller, like eeprom or flash.
\item Constant array of multiple Object dictionary entries of type \mbox{\hyperlink{struct_c_o___o_d__entry__t}{C\+O\+\_\+\+O\+D\+\_\+entry\+\_\+t}}. If object type is record, then entry includes additional constant array with members of type \mbox{\hyperlink{struct_c_o___o_d__entry_record__t}{C\+O\+\_\+\+O\+D\+\_\+entry\+Record\+\_\+t}}. Each OD entry includes information\+: index, max\+Sub\+Index, \mbox{\hyperlink{group___c_o___s_d_o_ga0244f2d504e0de4f14614884d7319fd0}{C\+O\+\_\+\+S\+D\+O\+\_\+\+O\+D\+\_\+attributes\+\_\+t}}, data size and pointer to variable.
\end{DoxyItemize}

Function \mbox{\hyperlink{group___c_o___s_d_o_gafa0a372b99831b893350fcb7e6146375}{C\+O\+\_\+\+S\+D\+O\+\_\+init()}} initializes object \mbox{\hyperlink{struct_c_o___s_d_o__t}{C\+O\+\_\+\+S\+D\+O\+\_\+t}}, which includes S\+DO server and Object dictionary.

Application doesn\textquotesingle{}t need to know anything about the Object dictionary. It can use variables specified in C\+O\+\_\+\+O\+D.\+h file directly. If it needs more control over the C\+A\+Nopen communication with the variables, it can configure additional functionality with function \mbox{\hyperlink{group___c_o___s_d_o_gab433430abe125bb16c08e7be3e034985}{C\+O\+\_\+\+O\+D\+\_\+configure()}}. Additional functionality include\+: \mbox{\hyperlink{group___c_o___s_d_o___o_d__function}{Object Dictionary function}} and \mbox{\hyperlink{group___c_o___s_d_o_ga954a22b6af836082afaf69b0f0cc4c7e}{C\+O\+\_\+\+S\+D\+O\+\_\+\+O\+D\+\_\+flags\+\_\+t}}.

Interface to Object dictionary is provided by following functions\+: \mbox{\hyperlink{group___c_o___s_d_o_ga2532cf0445a91285b6e06e67abb1135d}{C\+O\+\_\+\+O\+D\+\_\+find()}} finds OD entry by index, \mbox{\hyperlink{group___c_o___s_d_o_gad492842213f493a27c274b01c4e02075}{C\+O\+\_\+\+O\+D\+\_\+get\+Length()}} returns length of variable, C\+O\+\_\+\+O\+D\+\_\+get\+Attribute returns attribute and \mbox{\hyperlink{group___c_o___s_d_o_ga3ee04247261fbe560132584f727ed99d}{C\+O\+\_\+\+O\+D\+\_\+get\+Data\+Pointer()}} returns pointer to data. These functions are used by S\+DO server and by P\+DO configuration. They can also be used to access the OD by index like this.


\begin{DoxyCode}{0}
\DoxyCodeLine{index = \mbox{\hyperlink{group___c_o___s_d_o_ga2532cf0445a91285b6e06e67abb1135d}{CO\_OD\_find}}(\mbox{\hyperlink{group___c_o___c_a_nopen_gaa6b0e31a1f760af91bb742c83c00a6c1}{CO}}-\/>\mbox{\hyperlink{struct_c_o__t_a0dffab2b3417cb3ea5be496a732bbd02}{SDO}}[0], \mbox{\hyperlink{group___c_o___s_d_o_gga7940130bc04382e487b1153b8644e17eaf4eb4e0204ae9696f935af5d4fdcff7e}{OD\_H1001\_ERR\_REG}});}
\DoxyCodeLine{\textcolor{keywordflow}{if} (index == 0xffff) \{}
\DoxyCodeLine{    \textcolor{keywordflow}{return};}
\DoxyCodeLine{\}}
\DoxyCodeLine{length = \mbox{\hyperlink{group___c_o___s_d_o_gad492842213f493a27c274b01c4e02075}{CO\_OD\_getLength}}(\mbox{\hyperlink{group___c_o___c_a_nopen_gaa6b0e31a1f760af91bb742c83c00a6c1}{CO}}-\/>\mbox{\hyperlink{struct_c_o__t_a0dffab2b3417cb3ea5be496a732bbd02}{SDO}}[0], index, 1);}
\DoxyCodeLine{\textcolor{keywordflow}{if} (length != \textcolor{keyword}{sizeof}(new\_data)) \{}
\DoxyCodeLine{   \textcolor{keywordflow}{return};}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{p = \mbox{\hyperlink{group___c_o___s_d_o_ga3ee04247261fbe560132584f727ed99d}{CO\_OD\_getDataPointer}}(\mbox{\hyperlink{group___c_o___c_a_nopen_gaa6b0e31a1f760af91bb742c83c00a6c1}{CO}}-\/>\mbox{\hyperlink{struct_c_o__t_a0dffab2b3417cb3ea5be496a732bbd02}{SDO}}[0], index, 1);}
\DoxyCodeLine{\textcolor{keywordflow}{if} (p == NULL) \{}
\DoxyCodeLine{    \textcolor{keywordflow}{return};}
\DoxyCodeLine{\}}
\DoxyCodeLine{\mbox{\hyperlink{group___c_o__driver_ga3850830931ced2bd3d7e15821572bbcc}{CO\_LOCK\_OD}}();}
\DoxyCodeLine{*p = new\_data;}
\DoxyCodeLine{\mbox{\hyperlink{group___c_o__driver_ga2477f5d24fd31a9f4052cf451b87809f}{CO\_UNLOCK\_OD}}();}
\end{DoxyCode}


Be aware that accessing the OD directly using C\+O\+\_\+\+O\+D.\+h files is more C\+PU efficient as \mbox{\hyperlink{group___c_o___s_d_o_ga2532cf0445a91285b6e06e67abb1135d}{C\+O\+\_\+\+O\+D\+\_\+find()}} has to do a search everytime it is called.

C\+A\+Nopen Object dictionary is a collection of different data items, which can be used by the stack or by the application.

Each Object dictionary entry is located under 16-\/bit index, as specified by the C\+A\+Nopen\+:
\begin{DoxyItemize}
\item 0x0001..0x025F\+: Data type definitions.
\item 0x1000..0x1\+F\+FF\+: Communication profile area.
\item 0x2000..0x5\+F\+FF\+: Manufacturer-\/specific profile area.
\item 0x6000..0x9\+F\+FF\+: Standardized device profile area for eight logical devices.
\item 0x\+A000..0x\+A\+F\+FF\+: Standardized network variable area.
\item 0x\+B000..0x\+B\+F\+FF\+: Standardized system variable area.
\item Other\+: Reserved.
\end{DoxyItemize}

If Object dictionary entry has complex data type (array or structure), then 8-\/bit sub\+Index specifies the sub-\/member of the entry. In that case sub\+Index 0x00 is encoded as uint8\+\_\+t and specifies the highest available sub\+Index with that entry. Subindex 0x\+FF has special meaning in the standard and is not supported by C\+A\+Nopen\+Node.\hypertarget{group___c_o___s_d_o__object_dictionary_autotoc_md67}{}\doxysubparagraph{Object type of one Object dictionary entry}\label{group___c_o___s_d_o__object_dictionary_autotoc_md67}

\begin{DoxyItemize}
\item N\+U\+LL\+: Not used by C\+A\+Nopen\+Node.
\item D\+O\+M\+A\+IN\+: Block of data of variable length. Data and length are under control of the application.
\item D\+E\+F\+T\+Y\+PE\+: Definition of C\+A\+Nopen basic data type, for example I\+N\+T\+E\+G\+E\+R16.
\item D\+E\+F\+S\+T\+R\+U\+CT\+: Definition of complex data type -\/ structure, which is used with R\+E\+C\+O\+RD.
\item V\+AR\+: Variable of C\+A\+Nopen basic data type. Subindex is 0.
\item A\+R\+R\+AY\+: Array of multiple variables of the same C\+A\+Nopen basic data type. Subindex 1..array\+Length specifies sub-\/member.
\item R\+E\+C\+O\+RD\+: Record or structure of multiple variables of different C\+A\+Nopen basic data type. Subindex specifies sub-\/member.
\end{DoxyItemize}\hypertarget{group___c_o___s_d_o__object_dictionary_autotoc_md68}{}\doxysubparagraph{Implementation in C\+A\+Nopen\+Node}\label{group___c_o___s_d_o__object_dictionary_autotoc_md68}
Object dictionary in C\+A\+Nopen\+Node is implemented in C\+O\+\_\+\+O\+D.\+h and C\+O\+\_\+\+O\+D.\+c files. These files are application specific and must be generated by Object dictionary editor (application is included by the stack).

C\+O\+\_\+\+O\+D.\+h and C\+O\+\_\+\+O\+D.\+c files include\+:
\begin{DoxyItemize}
\item Structure definitions for records.
\item Global declaration and initialization of all variables, arrays and records mapped to Object dictionary. Variables are distributed in multiple objects, depending on memory location. This eases storage to different memories in microcontroller, like eeprom or flash.
\item Constant array of multiple Object dictionary entries of type \mbox{\hyperlink{struct_c_o___o_d__entry__t}{C\+O\+\_\+\+O\+D\+\_\+entry\+\_\+t}}. If object type is record, then entry includes additional constant array with members of type \mbox{\hyperlink{struct_c_o___o_d__entry_record__t}{C\+O\+\_\+\+O\+D\+\_\+entry\+Record\+\_\+t}}. Each OD entry includes information\+: index, max\+Sub\+Index, \mbox{\hyperlink{group___c_o___s_d_o_ga0244f2d504e0de4f14614884d7319fd0}{C\+O\+\_\+\+S\+D\+O\+\_\+\+O\+D\+\_\+attributes\+\_\+t}}, data size and pointer to variable.
\end{DoxyItemize}

Function \mbox{\hyperlink{group___c_o___s_d_o_gafa0a372b99831b893350fcb7e6146375}{C\+O\+\_\+\+S\+D\+O\+\_\+init()}} initializes object \mbox{\hyperlink{struct_c_o___s_d_o__t}{C\+O\+\_\+\+S\+D\+O\+\_\+t}}, which includes S\+DO server and Object dictionary.

Application doesn\textquotesingle{}t need to know anything about the Object dictionary. It can use variables specified in C\+O\+\_\+\+O\+D.\+h file directly. If it needs more control over the C\+A\+Nopen communication with the variables, it can configure additional functionality with function \mbox{\hyperlink{group___c_o___s_d_o_gab433430abe125bb16c08e7be3e034985}{C\+O\+\_\+\+O\+D\+\_\+configure()}}. Additional functionality include\+: \mbox{\hyperlink{group___c_o___s_d_o___o_d__function}{Object Dictionary function}} and \mbox{\hyperlink{group___c_o___s_d_o_ga954a22b6af836082afaf69b0f0cc4c7e}{C\+O\+\_\+\+S\+D\+O\+\_\+\+O\+D\+\_\+flags\+\_\+t}}.

Interface to Object dictionary is provided by following functions\+: \mbox{\hyperlink{group___c_o___s_d_o_ga2532cf0445a91285b6e06e67abb1135d}{C\+O\+\_\+\+O\+D\+\_\+find()}} finds OD entry by index, \mbox{\hyperlink{group___c_o___s_d_o_gad492842213f493a27c274b01c4e02075}{C\+O\+\_\+\+O\+D\+\_\+get\+Length()}} returns length of variable, C\+O\+\_\+\+O\+D\+\_\+get\+Attribute returns attribute and \mbox{\hyperlink{group___c_o___s_d_o_ga3ee04247261fbe560132584f727ed99d}{C\+O\+\_\+\+O\+D\+\_\+get\+Data\+Pointer()}} returns pointer to data. These functions are used by S\+DO server and by P\+DO configuration. They can also be used to access the OD by index like this.


\begin{DoxyCode}{0}
\DoxyCodeLine{index = \mbox{\hyperlink{group___c_o___s_d_o_ga2532cf0445a91285b6e06e67abb1135d}{CO\_OD\_find}}(\mbox{\hyperlink{group___c_o___c_a_nopen_gaa6b0e31a1f760af91bb742c83c00a6c1}{CO}}-\/>\mbox{\hyperlink{struct_c_o__t_a0dffab2b3417cb3ea5be496a732bbd02}{SDO}}[0], \mbox{\hyperlink{group___c_o___s_d_o_gga7940130bc04382e487b1153b8644e17eaf4eb4e0204ae9696f935af5d4fdcff7e}{OD\_H1001\_ERR\_REG}});}
\DoxyCodeLine{\textcolor{keywordflow}{if} (index == 0xffff) \{}
\DoxyCodeLine{    \textcolor{keywordflow}{return};}
\DoxyCodeLine{\}}
\DoxyCodeLine{length = \mbox{\hyperlink{group___c_o___s_d_o_gad492842213f493a27c274b01c4e02075}{CO\_OD\_getLength}}(\mbox{\hyperlink{group___c_o___c_a_nopen_gaa6b0e31a1f760af91bb742c83c00a6c1}{CO}}-\/>\mbox{\hyperlink{struct_c_o__t_a0dffab2b3417cb3ea5be496a732bbd02}{SDO}}[0], index, 1);}
\DoxyCodeLine{\textcolor{keywordflow}{if} (length != \textcolor{keyword}{sizeof}(new\_data)) \{}
\DoxyCodeLine{   \textcolor{keywordflow}{return};}
\DoxyCodeLine{\}}
\DoxyCodeLine{}
\DoxyCodeLine{p = \mbox{\hyperlink{group___c_o___s_d_o_ga3ee04247261fbe560132584f727ed99d}{CO\_OD\_getDataPointer}}(\mbox{\hyperlink{group___c_o___c_a_nopen_gaa6b0e31a1f760af91bb742c83c00a6c1}{CO}}-\/>\mbox{\hyperlink{struct_c_o__t_a0dffab2b3417cb3ea5be496a732bbd02}{SDO}}[0], index, 1);}
\DoxyCodeLine{\textcolor{keywordflow}{if} (p == NULL) \{}
\DoxyCodeLine{    \textcolor{keywordflow}{return};}
\DoxyCodeLine{\}}
\DoxyCodeLine{\mbox{\hyperlink{group___c_o__driver_ga3850830931ced2bd3d7e15821572bbcc}{CO\_LOCK\_OD}}();}
\DoxyCodeLine{*p = new\_data;}
\DoxyCodeLine{\mbox{\hyperlink{group___c_o__driver_ga2477f5d24fd31a9f4052cf451b87809f}{CO\_UNLOCK\_OD}}();}
\end{DoxyCode}


Be aware that accessing the OD directly using C\+O\+\_\+\+O\+D.\+h files is more C\+PU efficient as \mbox{\hyperlink{group___c_o___s_d_o_ga2532cf0445a91285b6e06e67abb1135d}{C\+O\+\_\+\+O\+D\+\_\+find()}} has to do a search everytime it is called. 